export default {
  isUserAuthorized
}

// кешируем обьект чтобы лишний раз не парсить JSON
let userCache = false;

export function isUserAuthorized(needReturn = false) {
  let user = userCache || JSON.parse(localStorage.getItem('user_token'));
  if (user && (new Date().getTime() < user.expires_in)) {
    userCache = user;
    return needReturn ? user : true;
  }
  localStorage.removeItem('user_token');
  return false;
}

export function toFloatNumbers(num) {
  return Math.ceil((num)*100)/100;
}

export function debounce(f, ms) {
  let timer = null;

  return function (...args) {
    const onComplete = () => {
      f.apply(this, args);
      timer = null;
    };

    if (timer) {
      clearTimeout(timer);
    }

    timer = setTimeout(onComplete, ms);
  };
}