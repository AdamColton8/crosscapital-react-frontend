import { tradePlansConstants } from '_constants';
import { tradePlansService } from '../_services';
import { alertActions } from '_actions';

export const tradePlansActions = {
  fetch
};

function fetch() {
  return dispatch => {
    return new Promise((resolve,reject)=> {
      dispatch(request());

      tradePlansService.fetch()
        .then(
          plans => {
            dispatch(success(plans));
            resolve('200');
          },
          error => {
            let message = 'failure';
            dispatch(failure(message));
            dispatch(alertActions.error(message));
          }
        );
    });
  };

  function request() { return { type: tradePlansConstants.REQUEST } }
  function success(plans) { return { type: tradePlansConstants.SUCCESS, payload: plans } }
  function failure() { return { type: tradePlansConstants.FAILURE} }
}